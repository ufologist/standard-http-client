!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).StandardHttpClient=t()}(this,function(){"use strict";function o(r,n){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return r.apply(n,e)}}var t=Object.prototype.toString;function i(e){return"[object Array]"===t.call(e)}function r(e){return null!==e&&"object"==typeof e}function n(e){return"[object Function]"===t.call(e)}function s(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var f={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===t.call(e)},isBuffer:function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:r,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===t.call(e)},isFile:function(e){return"[object File]"===t.call(e)},isBlob:function(e){return"[object Blob]"===t.call(e)},isFunction:n,isStream:function(e){return r(e)&&n(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:s,merge:function r(){var n={};function e(e,t){"object"==typeof n[t]&&"object"==typeof e?n[t]=r(n[t],e):n[t]=e}for(var t=0,o=arguments.length;t<o;t++)s(arguments[t],e);return n},deepMerge:function r(){var n={};function e(e,t){"object"==typeof n[t]&&"object"==typeof e?n[t]=r(n[t],e):n[t]="object"==typeof e?r({},e):e}for(var t=0,o=arguments.length;t<o;t++)s(arguments[t],e);return n},extend:function(r,e,n){return s(e,function(e,t){r[t]=n&&"function"==typeof e?o(e,n):e}),r},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function a(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function p(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(f.isURLSearchParams(t))n=t.toString();else{var o=[];f.forEach(t,function(e,t){null!=e&&(f.isArray(e)?t+="[]":e=[e],f.forEach(e,function(e){f.isDate(e)?e=e.toISOString():f.isObject(e)&&(e=JSON.stringify(e)),o.push(a(t)+"="+a(e))}))}),n=o.join("&")}if(n){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}function e(){this.handlers=[]}e.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},e.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},e.prototype.forEach=function(t){f.forEach(this.handlers,function(e){null!==e&&t(e)})};function u(t,r,e){return f.forEach(e,function(e){t=e(t,r)}),t}function c(e){return!(!e||!e.__CANCEL__)}function l(r,n){f.forEach(r,function(e,t){t!==n&&t.toUpperCase()===n.toUpperCase()&&(r[n]=e,delete r[t])})}function d(e,t,r,n,o){return function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,r,n,o)}var h,m,v,y=e,g=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],b=f.isStandardBrowserEnv()?(m=/(msie|trident)/i.test(navigator.userAgent),v=document.createElement("a"),h=w(window.location.href),function(e){var t=f.isString(e)?w(e):e;return t.protocol===h.protocol&&t.host===h.host}):function(){return!0};function w(e){var t=e;return m&&(v.setAttribute("href",t),t=v.href),v.setAttribute("href",t),{href:v.href,protocol:v.protocol?v.protocol.replace(/:$/,""):"",host:v.host,search:v.search?v.search.replace(/^\?/,""):"",hash:v.hash?v.hash.replace(/^#/,""):"",hostname:v.hostname,port:v.port,pathname:"/"===v.pathname.charAt(0)?v.pathname:"/"+v.pathname}}function _(c){return new Promise(function(r,n){var o=c.data,i=c.headers;f.isFormData(o)&&delete i["Content-Type"];var s=new XMLHttpRequest;if(c.auth){var e=c.auth.username||"",t=c.auth.password||"";i.Authorization="Basic "+btoa(e+":"+t)}if(s.open(c.method.toUpperCase(),p(c.url,c.params,c.paramsSerializer),!0),s.timeout=c.timeout,s.onreadystatechange=function(){if(s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in s?function(e){var t,r,n,o={};return e&&f.forEach(e.split("\n"),function(e){if(n=e.indexOf(":"),t=f.trim(e.substr(0,n)).toLowerCase(),r=f.trim(e.substr(n+1)),t){if(o[t]&&0<=g.indexOf(t))return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}}),o}(s.getAllResponseHeaders()):null,t={data:c.responseType&&"text"!==c.responseType?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:e,config:c,request:s};!function(e,t,r){var n=r.config.validateStatus;!n||n(r.status)?e(r):t(d("Request failed with status code "+r.status,r.config,null,r.request,r))}(r,n,t),s=null}},s.onabort=function(){s&&(n(d("Request aborted",c,"ECONNABORTED",s)),s=null)},s.onerror=function(){n(d("Network Error",c,null,s)),s=null},s.ontimeout=function(){n(d("timeout of "+c.timeout+"ms exceeded",c,"ECONNABORTED",s)),s=null},f.isStandardBrowserEnv()){var a=R,u=(c.withCredentials||b(c.url))&&c.xsrfCookieName?a.read(c.xsrfCookieName):void 0;u&&(i[c.xsrfHeaderName]=u)}if("setRequestHeader"in s&&f.forEach(i,function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete i[t]:s.setRequestHeader(t,e)}),c.withCredentials&&(s.withCredentials=!0),c.responseType)try{s.responseType=c.responseType}catch(e){if("json"!==c.responseType)throw e}"function"==typeof c.onDownloadProgress&&s.addEventListener("progress",c.onDownloadProgress),"function"==typeof c.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",c.onUploadProgress),c.cancelToken&&c.cancelToken.promise.then(function(e){s&&(s.abort(),n(e),s=null)}),void 0===o&&(o=null),s.send(o)})}var R=f.isStandardBrowserEnv()?{write:function(e,t,r,n,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),f.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),f.isString(n)&&s.push("path="+n),f.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},S={"Content-Type":"application/x-www-form-urlencoded"};function j(e,t){!f.isUndefined(e)&&f.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var C,E={adapter:("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?C=_:"undefined"!=typeof XMLHttpRequest&&(C=_),C),transformRequest:[function(e,t){return l(t,"Accept"),l(t,"Content-Type"),f.isFormData(e)||f.isArrayBuffer(e)||f.isBuffer(e)||f.isStream(e)||f.isFile(e)||f.isBlob(e)?e:f.isArrayBufferView(e)?e.buffer:f.isURLSearchParams(e)?(j(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):f.isObject(e)?(j(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300}};E.headers={common:{Accept:"application/json, text/plain, */*"}},f.forEach(["delete","get","head"],function(e){E.headers[e]={}}),f.forEach(["post","put","patch"],function(e){E.headers[e]=f.merge(S)});var q=E;function k(e){e.cancelToken&&e.cancelToken.throwIfRequested()}function x(t){return k(t),t.baseURL&&!function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}(t.url)&&(t.url=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(t.baseURL,t.url)),t.headers=t.headers||{},t.data=u(t.data,t.headers,t.transformRequest),t.headers=f.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),f.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||q.adapter)(t).then(function(e){return k(t),e.data=u(e.data,e.headers,t.transformResponse),e},function(e){return c(e)||(k(t),e&&e.response&&(e.response.data=u(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}function O(t,r){r=r||{};var n={};return f.forEach(["url","method","params","data"],function(e){void 0!==r[e]&&(n[e]=r[e])}),f.forEach(["headers","auth","proxy"],function(e){f.isObject(r[e])?n[e]=f.deepMerge(t[e],r[e]):void 0!==r[e]?n[e]=r[e]:f.isObject(t[e])?n[e]=f.deepMerge(t[e]):void 0!==t[e]&&(n[e]=t[e])}),f.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(e){void 0!==r[e]?n[e]=r[e]:void 0!==t[e]&&(n[e]=t[e])}),n}function A(e){this.defaults=e,this.interceptors={request:new y,response:new y}}A.prototype.request=function(e,t){"string"==typeof e?(e=t||{}).url=arguments[0]:e=e||{},(e=O(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var r=[x,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){r.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){r.push(e.fulfilled,e.rejected)});r.length;)n=n.then(r.shift(),r.shift());return n},A.prototype.getUri=function(e){return e=O(this.defaults,e),p(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},f.forEach(["delete","get","head","options"],function(r){A.prototype[r]=function(e,t){return this.request(f.merge(t||{},{method:r,url:e}))}}),f.forEach(["post","put","patch"],function(n){A.prototype[n]=function(e,t,r){return this.request(f.merge(r||{},{method:n,url:e,data:t}))}});var T=A;function N(e){this.message=e}N.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},N.prototype.__CANCEL__=!0;var U=N;function P(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new U(e),t(r.reason))})}P.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},P.source=function(){var t;return{token:new P(function(e){t=e}),cancel:t}};var B=P;function L(e){var t=new T(e),r=o(T.prototype.request,t);return f.extend(r,T.prototype,t),f.extend(r,t),r}var I=L(q);I.Axios=T,I.create=function(e){return L(O(I.defaults,e))},I.Cancel=U,I.CancelToken=B,I.isCancel=c,I.all=function(e){return Promise.all(e)},I.spread=function(t){return function(e){return t.apply(null,e)}};var D=I,F=I;D.default=F;var K=D;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var H,z=(function(e,t){function p(t){try{delete window[t]}catch(e){window[t]=void 0}}function l(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}var r;r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null},e.exports=function(i){var s=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=i,u=s.timeout||r.timeout,c=s.jsonpCallback||r.jsonpCallback,f=void 0;return new Promise(function(t,e){var r=s.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),n=c+"_"+r;window[r]=function(e){t({ok:!0,json:function(){return Promise.resolve(e)}}),f&&clearTimeout(f),l(n),p(r)},a+=-1===a.indexOf("?")?"?":"&";var o=document.createElement("script");o.setAttribute("src",""+a+c+"="+r),s.charset&&o.setAttribute("charset",s.charset),o.id=n,document.getElementsByTagName("head")[0].appendChild(o),f=setTimeout(function(){e(new Error("JSONP request to "+i+" timed out")),p(r),l(n),window[r]=function(){p(r)}},u),o.onerror=function(){e(new Error("JSONP request to "+i+" failed")),p(r),l(n),f&&clearTimeout(f)}})}}(H={exports:{}},H.exports),H.exports);function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e){var t=e;return(t||null!=t)&&("number"!=typeof t||isFinite(t))||(t=""),String(t)}function Q(e){var t=e.indexOf("#");return e.substring(0,-1!==t?t:e.length)}function X(e){var r=[];if(!e)return r;if("string"==typeof e)for(var t=e.split("&"),n=0,o=t.length;n<o;n++){var i=t[n],s=i.indexOf("="),a="",u=void 0;-1!==s?(a=i.substring(0,s),u=i.substring(s+1,i.length)):a=i;try{a=decodeURIComponent(a)}catch(e){console.warn("decodeURIComponent key error, remain key",a,e)}if(void 0!==u)try{u=decodeURIComponent(u)}catch(e){console.warn("decodeURIComponent value error, remain value",u,e)}else u="";r.push({key:a,value:u})}else for(a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=a;try{c=decodeURIComponent(c)}catch(e){console.warn("decodeURIComponent key error, remain key",c,e)}u=e[a];if("[object Array]"===Object.prototype.toString.call(u))u.forEach(function(e){var t=M(e);try{t=decodeURIComponent(t)}catch(e){console.warn("decodeURIComponent value error, remain value",t,e)}r.push({key:c,value:t})});else{u=M(u);try{u=decodeURIComponent(u)}catch(e){console.warn("decodeURIComponent value error, remain value",u,e)}r.push({key:c,value:u})}}return r}var $=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e||"",this._queryStringKvs=X(function(e){var t=Q(e),r=t.indexOf("?");return-1!==r?t.substring(r+1):""}(this._url))}return function(e,t,r){t&&J(e.prototype,t),r&&J(e,r)}(t,[{key:"append",value:function(e){var t=X(e);return this._queryStringKvs=this._queryStringKvs.concat(t),this}},{key:"get",value:function(e){return this.getAll(e)[0]}},{key:"getAll",value:function(t){return this._queryStringKvs.filter(function(e){return e.key===t}).map(function(e){return e.value})}},{key:"set",value:function(t,e){var r={};r[t]=e;var n=X(r),o=this._queryStringKvs.filter(function(e){return e.key===t});if(0<o.length){var i=this._queryStringKvs.indexOf(o[0]);this.delete(t);for(var s=this._queryStringKvs.slice(0,i),a=this._queryStringKvs.slice(i+1),u=0,c=n.length;u<c;u++)s.push(n[u]);this._queryStringKvs=s.concat(a)}else this.append(r);return this}},{key:"has",value:function(t){return 0<this._queryStringKvs.filter(function(e){return e.key===t}).length}},{key:"delete",value:function(t){var r=this._queryStringKvs;return r.filter(function(e){return e.key===t}).forEach(function(e){var t=r.indexOf(e);r.splice(t,1)}),this}},{key:"keys",value:function(){return this._queryStringKvs.reduce(function(e,t){return-1===e.indexOf(t.key)&&e.push(t.key),e},[])}},{key:"sort",value:function(){return this._queryStringKvs.sort(function(e,t){return e.key>t.key?1:e.key<t.key?-1:0}),this}},{key:"toString",value:function(e){var t=!(0<arguments.length&&void 0!==e)||e,r="",n=this._queryStringKvs;n=n.filter(function(e){return""!==e.key}),t||(n=n.filter(function(e){return""!==e.value}));var o=n.map(function(e){return encodeURIComponent(e.key)+"="+encodeURIComponent(e.value)}).join("&");r=function(e){var t=Q(e),r=t.indexOf("?");return t.substring(0,-1!=r?r:t.length)}(this._url),o&&(r=r?r+"?"+o:o);var i=function(e){var t=e.indexOf("#");return-1!==t?e.substring(t+1):""}(this._url);return i&&(r=r+"#"+i),r}},{key:"replace",value:function(e){for(var t=X(e),r=0,n=t.length;r<n;r++)this.delete(t[r].key);return this.append(e),this}},{key:"getObject",value:function(){return this._queryStringKvs.reduce(function(e,t){var r=t.key,n=t.value,o=e[r];return void 0===o?e[r]=n:"[object Array]"===Object.prototype.toString.apply(o)?o.push(n):e[r]=[o,n],e},{})}}]),t}();function V(e){this._requestQueue={},this.agent=K.create(e),this.useInterceptors()}return V.prototype.useInterceptors=function(){this._hook(),this._isResponseSuccess(),this._descResponseError(),this._handleError(),this._logResponseError()},V.prototype._isResponseSuccess=function(){var i=this;this.agent.interceptors.response.use(function(e){var t,r=e.data;if(i._isApiSuccess(e))return Promise.resolve([r.data,e]);var n="";n=(null===(t=null==r?void 0:r.statusInfo)||void 0===t?void 0:t.message)?r.statusInfo.message:(null==r?void 0:r.message)?r.message:"接口调用出错但未提供错误信息";var o=new Error(n);return o.response=e,o.request=e.request,o.config=e.config,Promise.reject(o)})},V.prototype._descResponseError=function(){var o=this;this.agent.interceptors.response.use(void 0,function(e){var t;if(e.config){var r=e.config.validateStatus||o.agent.defaults.validateStatus,n=e.response;n?r&&r(n.status)?o._descRequestError(e,"接口调用出错","B",(null===(t=n.data)||void 0===t?void 0:t.status)||0):o._descRequestError(e,"网络请求错误","H",n.status):o._descRequestError(e,"网络请求失败","A")}else o._descClientError(e);return Promise.reject(e)})},V.prototype._descClientError=function(e){this._descRequestError(e,"客户端处理出错","C")},V.prototype._descRequestError=function(e,t,r,n){var o,i;void 0===t&&(t="接口调用出错"),void 0===r&&(r="H"),e._desc=t,e._errorType=r,e._errorNumber=void 0===n?(null===(i=null===(o=e.message)||void 0===o?void 0:o.charCodeAt)||void 0===i?void 0:i.call(o,0))||0:n,e._errorCode=""+e._errorType+e._errorNumber},V.prototype._logResponseError=function(){this.agent.interceptors.response.use(void 0,function(e){var t,r;return console.warn(e._desc+"("+e._errorCode+")",null===(t=e.config)||void 0===t?void 0:t.method,null===(r=e.config)||void 0===r?void 0:r.url,e.message,e.config,e.response,e),Promise.reject(e)})},V.prototype._hook=function(){var t=this;this.agent.interceptors.request.use(function(e){return t.beforeSend(e),e}),this.agent.interceptors.response.use(function(e){return t.afterSend(e),e},function(e){return t.afterSend(e),Promise.reject(e)})},V.prototype._handleError=function(){var r=this;this.agent.interceptors.response.use(void 0,function(t){try{r.handleError(t)}catch(e){throw e.response=t.response,e.request=t.request,e.config=t.config,r._descClientError(e),e}return Promise.reject(t)})},V.prototype.beforeSend=function(e){},V.prototype.afterSend=function(e){},V.prototype.handleError=function(e){},V.prototype.send=function(e){var t=this;return void 0===e&&(e={}),this._adapterDataOption(e),e._interceptDuplicateRequest&&this._isDuplicateRequest(e)?(console.warn("拦截到重复请求",e.method,e.url,e),new Promise(function(){})):(this._addRequestToQueue(e),(e._jsonp?this._jsonp({method:"get",baseURL:e.baseURL,url:e.url,params:e.params,timeout:e.timeout,transformResponse:e.transformResponse,_jsonpCallback:e._jsonpCallback}):this._dispatchRequest(e)).finally(function(){t._removeRequestFromQueue(e)}))},V.prototype._adapterDataOption=function(e){var t,r;if(e._data){var n=(null===(r=null===(t=e.method)||void 0===t?void 0:t.toLowerCase)||void 0===r?void 0:r.call(t))||"";-1!==["put","post","patch"].indexOf(n)?e.data||(e.data="object"==typeof e._data?(new $).append(e._data).toString():e._data):e.params=e.params||e._data}},V.prototype._getRequestFingerprint=function(t){var r="",n="";try{r=JSON.stringify(t.params)}catch(e){r=String(t.params),console.warn("序列化 `config.params` 出现异常",t.params)}try{n=JSON.stringify(t.data)}catch(e){n=String(t.data),console.warn("序列化 `config.data` 出现异常",t.data)}return t.method+" "+t.url+" "+r+" "+n},V.prototype._isDuplicateRequest=function(e){var t=this._getRequestFingerprint(e);return void 0!==this._requestQueue[t]},V.prototype._addRequestToQueue=function(e){var t=this._getRequestFingerprint(e);this._requestQueue[t]=e},V.prototype._removeRequestFromQueue=function(e){var t=this._getRequestFingerprint(e);delete this._requestQueue[t]},V.prototype._jsonp=function(r){var e=r.baseURL||this.agent.defaults.baseURL;e&&!function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}(r.url)&&(r.url=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,r.url));var t=r.url;r.params&&(t=new $(t).append(r.params).toString()),r.timeout||(r.timeout=this.agent.defaults.timeout);var n=r.transformResponse||this.agent.defaults.transformResponse,o=z(t,{timeout:r.timeout,jsonpCallback:r._jsonpCallback}).then(function(e){return e.json()}).then(function(e){var t=e;return n&&"[object Array]"===Object.prototype.toString.call(n)&&n.forEach(function(e){t=e(t)}),Promise.resolve({data:t,status:200,statusText:"OK",headers:{},config:r,request:"script"})}).catch(function(e){return e.request="script",e.response=null,e.config=r,Promise.reject(e)}),i=[o,void 0];for(this.agent.interceptors.request.forEach(function(e){i.unshift(e.fulfilled,e.rejected)}),this.agent.interceptors.response.forEach(function(e){i.push(e.fulfilled,e.rejected)});i.length;)o=o.then(i.shift(),i.shift());return o},V.prototype._dispatchRequest=function(e){return this.agent(e)},V.prototype._isApiSuccess=function(e){var t=e.data;return"object"==typeof t&&(void 0===t.status||0===t.status)},V});
